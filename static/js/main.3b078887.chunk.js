(this.webpackJsonpcards=this.webpackJsonpcards||[]).push([[0],{115:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),i=n(19),s=n.n(i),o=(n(90),n(15)),d=n(6),l=(n(91),n(4)),u=n(10),j=n(3),b=n(26),p=n(74),h=n.n(p).a.create({baseURL:"https://neko-back.herokuapp.com/2.0/",withCredentials:!0}),m=function(e){return h.post("auth/login",e)},O=function(){return h.post("auth/me")},f=function(){return h.delete("auth/me")},x=function(e,t){return h.post("auth/forgot",{email:e,from:t,message:"<div style=\"background-color: lime; padding: 15px\">error: string;password recovery link:<a href='https://neko-back.herokuapp.com/2.0/#/set-new-password/$token$'></a>link</a></div>"})},g=function(e,t){return h.post("auth/register",{email:e,password:t})},v=function(e){var t=e.user_id;return h.get("cards/pack?pageCount=1000&page=4&user_id=".concat(t,"&sortPacks=0updated"))},y=function(e){return h.post("cards/pack",{cardsPack:e})},w=function(e){return h.put("cards/pack",{cardsPack:e})},k=function(e){return h.delete("cards/pack?id=".concat(e))},C=n(11),P=Object(C.b)({name:"profile",initialState:{_id:"",email:"",name:"",avatar:""},reducers:{setProfile:function(e,t){e._id=t.payload._id,e.email=t.payload.email,e.name=t.payload.name,e.avatar=t.payload.avatar}}}),S=P.actions.setProfile,_=P.reducer,I=function(e){e.response?e.response.data.error:e.message},F=Object(C.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(e,t){e.isLoggedIn=t.payload.isLoggedIn}}}),N=F.reducer,A=F.actions.setIsLoggedIn,U=n(50),E=n(1),L=function(e){var t=e.type,n=e.onChange,r=e.onChangeText,c=e.onKeyPress,a=e.onEnter,i=e.error,s=Object(U.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error"]);return Object(E.jsxs)(T,{children:[Object(E.jsx)(R,Object(l.a)({type:t,onChange:function(e){n&&n(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){c&&c(e),"Enter"===e.key&&a&&a()}},s)),Object(E.jsx)(q,{children:i&&Object(E.jsx)("span",{children:i})})]})},T=u.a.div.withConfig({displayName:"InputText__InputTextWrapper",componentId:"v23cmq-0"})(["position:relative;width:100%;"]),R=u.a.input.withConfig({displayName:"InputText__StyledInput",componentId:"v23cmq-1"})(["padding:1rem 0.5rem;margin-bottom:20px;height:20px;width:400px;border:1px solid rgb(109,109,109);"]),q=u.a.div.withConfig({displayName:"InputText__StyledError",componentId:"v23cmq-2"})(["position:absolute;bottom:1px;& > span{color:red;}"]),V=function(e){e.type;var t=e.error,n=Object(U.a)(e,["type","error"]);return Object(E.jsxs)(Z,{children:[Object(E.jsx)(D,Object(l.a)({type:"checkbox"},n)),Object(E.jsx)(H,{children:t&&Object(E.jsx)("span",{children:t})})]})},Z=u.a.div.withConfig({displayName:"Checkbox__InputTextWrapper",componentId:"sc-1y66hnq-0"})(["position:relative;width:100%;"]),D=u.a.input.withConfig({displayName:"Checkbox__StyledInput",componentId:"sc-1y66hnq-1"})(["padding:1rem 0.5rem;margin-bottom:20px;height:20px;width:400px;border:1px solid rgb(109,109,109);"]),H=u.a.div.withConfig({displayName:"Checkbox__StyledError",componentId:"sc-1y66hnq-2"})(["position:absolute;bottom:1px;& > span{color:red;}"]);!function(e){e.main="/",e.profile="/profile",e.login="/login",e.createPassword="/create-password",e.recoverPassword="/recover-password",e.signUp="/sign-up",e.pageNotFound="/404",e.packs="/packs"}(r||(r={}));var M=function(e){var t=Object.assign({},e);return Object(E.jsx)(W,Object(l.a)({},t))},W=u.a.button.withConfig({displayName:"Button__StyledButton",componentId:"bkhza4-0"})(["border:none;cursor:pointer;color:white;background-color:blue;padding:0.5rem 1rem;width:400px;&:hover{background-color:grey;}"]),$=function(){var e=Object(j.c)((function(e){return e.auth.isLoggedIn})),t=Object(j.b)(),n=Object(b.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<3&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(e){var r;console.log(e),t((r=e,function(e){m(r).then((function(t){var n=t.data,r=n._id,c=n.email,a=n.name,i=n.avatar;e(S({_id:r,email:c,name:a,avatar:i})),e(A({isLoggedIn:!0}))})).catch((function(e){return I(e)}))})),n.resetForm()}});return e?Object(E.jsx)(d.a,{to:r.profile}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{children:"Sign in"}),Object(E.jsxs)(z,{onSubmit:n.handleSubmit,children:[Object(E.jsx)(L,Object(l.a)({error:n.errors.email,type:"email"},n.getFieldProps("email"))),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.recoverPassword,children:"Forgot password?"})}),Object(E.jsx)(L,Object(l.a)({error:n.errors.password,type:"password"},n.getFieldProps("password"))),"Remember me ",Object(E.jsx)(V,Object(l.a)({},n.getFieldProps("rememberMe"))),Object(E.jsx)(M,{children:"Login"})]}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.signUp,children:"Sign up"})})]})},z=u.a.form.withConfig({displayName:"Login__StyledForm",componentId:"sc-18h2jcb-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;flex-basis:400px;"]),B=function(){return Object(E.jsx)("div",{children:"Password Creation"})},G=Object(C.b)({name:"passwordRecover",initialState:{forgotPassword:!1},reducers:{setForgotPassword:function(e,t){e.forgotPassword=t.payload.forgotPassword}}}),K=G.reducer,J=G.actions.setForgotPassword,X=u.a.form.withConfig({displayName:"StyledForm",componentId:"sc-16z011o-0"})(["display:flex;align-items:center;flex-direction:column;flex-basis:400px;"]),Q=a.a.memo((function(){var e=Object(j.b)(),t=Object(b.a)({validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",t},initialValues:{email:""},onSubmit:function(t){var n,r;e((n=t.email,r="test-front-admin <nikita11042000@gmail.com>",function(e){x(n,r).then((function(){J({forgotPassword:!0})})).catch((function(e){return I(e)}))}))}});return Object(E.jsxs)(X,{onSubmit:t.handleSubmit,children:[Object(E.jsx)(L,Object(l.a)({placeholder:"Email",error:t.errors.email},t.getFieldProps("email"))),Object(E.jsx)(M,{type:"submit",children:"Recover"})]})})),Y=u.a.div.withConfig({displayName:"FormContainer",componentId:"sc-1rsxnzt-0"})(["display:flex;align-items:center;justify-content:center;height:80%;align-self:center;&:only-child{width:50%;}"]),ee=function(e){return Object(j.c)((function(e){return e.recoverPassword.forgotPassword}))?Object(E.jsx)(d.a,{to:r.createPassword}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{children:"Password recovery"}),Object(E.jsx)(Y,{children:Object(E.jsx)(Q,{})})]})},te=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth.isLoggedIn})),n=Object(j.c)((function(e){return e.profile.name})),a=Object(j.c)((function(e){return e.profile.avatar}));Object(c.useEffect)((function(){e((function(e){O().then((function(t){var n=t.data,r=n._id,c=n.email,a=n.name,i=n.avatar;e(S({_id:r,email:c,name:a,avatar:i})),e(A({isLoggedIn:!0}))})).catch((function(e){e.response?e.response.data.error:e.message}))}))}),[]);return t?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{children:"Profile"}),Object(E.jsx)("div",{className:"imgWrapper",children:Object(E.jsx)("img",{src:a,alt:"avatar"})}),Object(E.jsxs)("div",{children:["Name: ",n]}),t&&Object(E.jsx)("button",{onClick:function(){e((function(e){f().then((function(){e(A({isLoggedIn:!1}))})).catch((function(e){return I(e)}))}))},children:"Logout"})]}):Object(E.jsx)(d.a,{to:r.login})},ne=Object(C.b)({name:"signUp",initialState:{isSignedUp:!1},reducers:{setIsSignedUp:function(e,t){e.isSignedUp=t.payload.isSignedUp}}}),re=ne.reducer,ce=ne.actions.setIsSignedUp,ae=function(){var e=Object(j.c)((function(e){return e.signUp.isSignedUp})),t=Object(j.b)(),n=Object(b.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<3&&(t.password="Invalid password"):t.password="Required",t},onSubmit:function(e){var r,c;console.log(e),t((r=e.email,c=e.password,function(e){g(r,c).then((function(){ce({isSignedUp:!0})})).catch((function(e){e.response?e.response.data.error:e.message}))})),n.resetForm()}});return e?Object(E.jsx)(d.a,{to:r.login}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{children:"Sign up"}),Object(E.jsxs)(ie,{onSubmit:n.handleSubmit,children:[Object(E.jsx)(L,Object(l.a)({error:n.errors.email,type:"email"},n.getFieldProps("email"))),Object(E.jsx)(L,Object(l.a)({error:n.errors.password,type:"password"},n.getFieldProps("password"))),Object(E.jsx)(M,{children:"Sign Up"})]})]})},ie=u.a.form.withConfig({displayName:"SignUp__StyledForm",componentId:"sc-1582owu-0"})(["display:flex;justify-content:center;align-items:center;flex-direction:column;flex-basis:400px;"]),se=n(30),oe=Object(C.b)({name:"packs",initialState:[],reducers:{setCardPacks:function(e,t){return t.payload.cardPacks.map((function(e){return Object(l.a)({},e)}))}}}),de=oe.reducer,le=oe.actions.setCardPacks,ue=n(136),je=n(133),be=function(e){var t=e._id,n=e.modalCloseHandler,r=Object(j.b)(),c=Object(b.a)({initialValues:{name:""},validate:function(e){var t={};e.name||(t.name="Name required"),e.name.length>100&&(t.name="Name is too long")},onSubmit:function(e){var c;console.log(Object(l.a)({_id:t},e)),r((c=Object(l.a)({_id:t},e),function(e,t){w(c).then((function(){var e=t().profile._id;return v({user_id:e})})).then((function(t){e(le({cardPacks:t.data.cardPacks}))})).catch((function(e){return I(e)}))})),n&&n()}});return Object(E.jsxs)("div",{style:{marginTop:"20px"},children:[Object(E.jsx)("h3",{children:"Update pack"}),Object(E.jsxs)(X,{onSubmit:c.handleSubmit,children:[Object(E.jsx)(L,Object(l.a)({placeholder:"Change name",error:c.errors.name},c.getFieldProps("name"))),Object(E.jsx)(M,{type:"submit",children:"Update pack"})]})]})},pe=function(e){var t=e.packId,n=e.name,r=e.cardsCount,a=e.updated;var i=Object(je.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(),s=Object(c.useState)((function(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}})),o=Object(se.a)(s,1)[0],d=Object(c.useState)(!1),l=Object(se.a)(d,2),u=l[0],b=l[1],p=function(){b(!1)},h=Object(E.jsx)("div",{style:o,className:i.paper,children:Object(E.jsx)(be,{_id:t,modalCloseHandler:p})}),m=Object(j.b)();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{children:n}),Object(E.jsx)("td",{children:r}),Object(E.jsx)("td",{children:a}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{type:"button",onClick:function(){m(function(e){return function(t,n){k(e).then((function(e){var t=n().profile._id;return v({user_id:t})})).then((function(e){t(le({cardPacks:e.data.cardPacks}))})).catch((function(e){return I(e)}))}}(t))},children:"Delete"})}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{type:"button",onClick:function(){b(!0)},children:"Update"})})]}),Object(E.jsx)(ue.a,{open:u,onClose:p,children:h})]})},he=function(){var e=Object(j.b)(),t=Object(b.a)({initialValues:{name:""},validate:function(e){var t={};e.name||(t.name="Name required"),e.name.length>100&&(t.name="Name is too long")},onSubmit:function(n){var r;console.log(n),e((r=n,function(e,t){y(r).then((function(){var e=t().profile._id;return v({user_id:e})})).then((function(t){e(le({cardPacks:t.data.cardPacks}))})).catch((function(e){return I(e)}))})),t.resetForm()}});return Object(E.jsxs)("div",{style:{marginTop:"20px"},children:[Object(E.jsx)("h3",{children:"Add pack"}),Object(E.jsxs)(X,{onSubmit:t.handleSubmit,children:[Object(E.jsx)(L,Object(l.a)({placeholder:"name",error:t.errors.name},t.getFieldProps("name"))),Object(E.jsx)(M,{type:"submit",children:"Add pack"})]})]})},me=n(137),Oe=function(e){var t=e.setValue2,n=e.min,r=e.max,c=e.setValue1;return Object(E.jsx)("div",{style:{width:"400px"},children:Object(E.jsx)(me.a,{value:[n,r],onChange:function(e,n){c(n[0]),t(n[1])},valueLabelDisplay:"auto","aria-labelledby":"range-slider",max:10,min:0})})},fe={cardPageTotalCount:1609,count:10,searchCardName:"",countSelect:10,cardPages:9,pagesList:1},xe=function(){for(var e=Object(j.c)((function(e){return e.search.cardPageTotalCount})),t=Object(j.c)((function(e){return e.search.count})),n=Math.ceil(e/t),r=[],a=0;a<n;a++)r.push(a);var i=Math.ceil(n/t),s=Object(c.useState)(1),o=Object(se.a)(s,2),d=o[0],l=o[1],u=(d-1)*t+1,b=d*t;Object(j.b)();return Object(E.jsxs)("div",{children:[d>1&&Object(E.jsx)("button",{onClick:function(){l(d-1)},children:"PREV"}),r.filter((function(e){return e>=u&&e<=b})).map((function(e){return Object(E.jsxs)("span",{style:{width:"30px",display:"alignItems"},children:[e,"-"]})})),i>d&&Object(E.jsx)("button",{onClick:function(){l(d+1)},children:"NEXT"})]})},ge=n(82),ve=n.n(ge),ye=n(83),we=n.n(ye),ke=function(){var e=Object(j.c)((function(e){return e.profile._id})),t=Object(j.c)((function(e){return e.packs})),n=Object(j.b)(),r=Object(c.useState)(0),a=Object(se.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(10),d=Object(se.a)(o,2),l=d[0],u=d[1],b=Object(c.useState)("middle"),p=Object(se.a)(b,2),h=(p[0],p[1]);Object(c.useEffect)((function(){var t;n((t={user_id:e},function(e){v(t).then((function(t){e(le({cardPacks:t.data.cardPacks}))})).catch((function(e){return I(e)}))}))}),[]);return Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("span",{style:{fontSize:"20px",marginRight:"10px"},children:"Search:"}),Object(E.jsx)("input",{placeholder:"Enter name",type:"text"})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{style:{fontWeight:"bold",textAlign:"center"},children:"Filtering by the count of cards"}),Object(E.jsx)(Oe,{setValue2:u,setValue1:s,max:l,min:i})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)(ve.a,{onClick:function(){h("max")}}),Object(E.jsx)(we.a,{onClick:function(){h("min")}})]}),Object(E.jsx)("div",{children:Object(E.jsx)(xe,{})})]}),Object(E.jsxs)("table",{children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Pack name"}),Object(E.jsx)("th",{children:"Cards count"}),Object(E.jsx)("th",{children:"Updated"})]})}),Object(E.jsxs)("tbody",{children:[0===t.length&&"Waiting for your cards \u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014",t.map((function(e){return Object(E.jsx)(pe,{packId:e._id,name:e.name,cardsCount:e.cardsCount,updated:e.updated},e._id)}))]})]}),Object(E.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(E.jsx)(he,{})})]})};var Ce=function(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsxs)("header",{children:[Object(E.jsx)("h1",{children:"CARDS APP"}),Object(E.jsxs)("nav",{className:"nav",children:[Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.profile,children:"profile"})}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.login,children:"login"})}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.createPassword,children:"createPassword"})}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.recoverPassword,children:"recoverPassword"})}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.signUp,children:"signUp"})}),Object(E.jsx)("div",{children:Object(E.jsx)(o.b,{to:r.packs,children:"packs"})})]})]}),Object(E.jsx)("div",{className:"contentContainer",children:Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.b,{exact:!0,path:r.main,render:function(){return Object(E.jsx)(te,{})}}),Object(E.jsx)(d.b,{path:r.profile,render:function(){return Object(E.jsx)(te,{})}}),Object(E.jsx)(d.b,{path:r.login,render:function(){return Object(E.jsx)($,{})}}),Object(E.jsx)(d.b,{path:r.createPassword,render:function(){return Object(E.jsx)(B,{})}}),Object(E.jsx)(d.b,{path:r.recoverPassword,render:function(){return Object(E.jsx)(ee,{})}}),Object(E.jsx)(d.b,{path:r.signUp,render:function(){return Object(E.jsx)(ae,{})}}),Object(E.jsx)(d.b,{path:r.packs,render:function(){return Object(E.jsx)(ke,{})}}),Object(E.jsx)(d.b,{path:r.pageNotFound,render:function(){return Object(E.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(E.jsx)(d.a,{from:"*",to:r.pageNotFound})]})})]})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Se=n(24),_e=n(41),Ie=Object(C.b)({name:"app",initialState:{status:"idle",error:null},reducers:{setAppStatus:function(e,t){e.status=t.payload.status},setAppError:function(e,t){e.error=t.payload.error}}}),Fe=Ie.reducer,Ne=Ie.actions,Ae=(Ne.setAppStatus,Ne.setAppError,Object(C.b)({name:"cards",initialState:{},reducers:{setCards:function(e,t){e[t.payload.cardsPack_id]=t.payload.cards}},extraReducers:function(e){e.addCase(le,(function(e,t){t.payload.cardPacks.forEach((function(t){e[t._id]=[]}))}))}})),Ue=Ae.reducer,Ee=(Ae.actions.setCards,Object(Se.b)({auth:N,app:Fe,recoverPassword:K,profile:_,signUp:re,packs:de,cards:Ue,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH/CHANGE-TEXT-SEARCH":return Object(l.a)(Object(l.a)({},e),{},{searchCardName:t.searchCardName});case"SEARCH/COUNT-OF-CARD":return Object(l.a)(Object(l.a)({},e),{},{cardPages:t.count});case"SEARCH/PAGE-COUNT":return Object(l.a)(Object(l.a)({},e),{},{pagesList:t.pagesList});default:return e}}})),Le=Object(C.a)({reducer:Ee,middleware:function(e){return e().prepend(_e.a)}});s.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(o.a,{children:Object(E.jsx)(j.a,{store:Le,children:Object(E.jsx)(Ce,{})})})}),document.getElementById("root")),Pe()},90:function(e,t,n){},91:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.3b078887.chunk.js.map